<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title data-i18n="maintenance_dashboard">Maintenance Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" />
  <link rel="stylesheet" href="DashBoard.css" />
  <link rel="stylesheet" href="/Language/Language.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
      --font-family: 'Tajawal', 'Arial', ;
    }

    body,
    h1, h2, h3, p, span, button, select, input,
    .dropdown-toggle, .dropdown-option-text, .dropdown-search,
    label {
      font-family: var(--font-family) !important;
    }

    ::placeholder,
    input::placeholder,
    textarea::placeholder,
    input::-webkit-input-placeholder,
    input::-moz-placeholder,
    input:-ms-input-placeholder,
    input::-ms-input-placeholder {
      font-family: var(--font-family) !important;
    }
  </style>
</head>

<body>
  <!-- Header section with logos -->
  <header>
    <div class="ms-logo">
      <img src="/icon/MS Logo.png" alt="MS Logo" />
    </div>
    <div class="hospital-logo">
      <img src="/icon/hospital-logo.png" alt="King Abdulaziz Hospital" />
    </div>
  </header>

  <!-- Navigation buttons -->
  <div class="nav-buttons">
    <div class="back-button">
      <a href="#" onclick="goBack()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M19 12H5M5 12L12 19M5 12L12 5" stroke="currentColor" stroke-width="2" stroke-linecap="round"
            stroke-linejoin="round" />
        </svg>
        <span data-i18n="back">Back</span>
      </a>
    </div>
    <div class="Home-button">
      <a href="#" onclick="goToHome()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M3 9L12 2L21 9V20C21 20.5304 20.7893 21.0391 20.4142 21.4142C20.0391 21.7893 19.5304 22 19 22H5C4.46957 22 3.96086 21.7893 3.58579 21.4142C3.21071 21.0391 3 20.5304 3 20V9Z"
            stroke="#3B82F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          <path d="M9 22V12H15V22" stroke="#3B82F6" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
        <span data-i18n="home">Home</span>
      </a>
    </div>
  </div>

  <!-- Dashboard Title -->
  <div class="dashboard-title">
    <span data-i18n="maintenance_dashboard">Maintenance Dashboard</span>
    <div style="font-size: 0.875rem; font-weight: 400; color: #6B7280; margin-top: 0.25rem;">
      <span data-i18n="last_updated">Last updated</span>: <span id="current-date"></span>
    </div>
  </div>

  <!-- Dashboard Grid -->
  <section class="dashboard">
    <!-- Completion Rates -->
    <div class="card1">
      <div class="label" data-i18n="completion_rates">Completion Rates</div>
      <div class="circle-group">
        <div class="circle-item">
          <div class="chart-container">
            <canvas id="routineStatusChart"></canvas>
            <div class="chart-hover-info">
              <div class="hover-percentage" id="regularPercentage"></div>
              <div class="hover-detail" id="regularDetail"></div>
            </div>
          </div>
          <div class="status-label" data-i18n="regular">Regular</div>
        </div>
        <div class="circle-item">
          <div class="chart-container">
            <canvas id="internalStatusChart"></canvas>
            <div class="chart-hover-info">
              <div class="hover-percentage" id="internalPercentage"></div>
              <div class="hover-detail" id="internalDetail"></div>
            </div>
          </div>
          <div class="status-label" data-i18n="internal">Internal</div>
        </div>
        <div class="circle-item">
          <div class="chart-container">
            <canvas id="externalStatusChart"></canvas>
            <div class="chart-hover-info">
              <div class="hover-percentage" id="externalPercentage"></div>
              <div class="hover-detail" id="externalDetail"></div>
            </div>
          </div>
          <div class="status-label" data-i18n="external">External</div>
        </div>
      </div>
      <div class="chart-footer" data-i18n="hover_for_details">Hover over charts for details</div>
    </div>

    <!-- Reports Overview -->
    <div class="card2">
      <div class="label" data-i18n="reports_overview">Reports Overview</div>
      <div class="chart-wrapper wavy-chart-container">
        <canvas id="reportLineChart"></canvas>
        <div class="wavy-overlay"></div>
      </div>
    </div>
    <br><br><br>
    <!-- Internal Maintenance - Critical Devices -->
    <div class="card3">
      <div class="label" data-i18n="internal_maintenance">Internal Maintenance - Critical Devices</div>
      <div class="device-grid" id="repeatedProblemsContainer">
        <!-- سيتم تعبئته برمجياً من Dashboard.js -->
      </div>
    </div>

    <!-- External Maintenance - Faulty Devices -->
    <div class="card4">
      <div class="label" data-i18n="external_maintenance">Renewing device</div>
      <table class="device-table">
        <thead>
          <tr>
            <th data-i18n="type">TYPE</th>
            <th data-i18n="specs">SPECS</th>
            <th data-i18n="status">STATUS</th>
          </tr>
        </thead>
        <tbody id="upgradeDevicesBody">
          <!-- سيتم تعبئته عبر الجافاسكربت -->
        </tbody>
      </table>
    </div>

    <!-- Support Tickets -->
    <div class="card full-width">
      <div class="label" data-i18n="support_tickets">Support Tickets</div>
      <div class="support-tickets-container" id="supportTicketsContainer">
        <div class="support-ticket">
          <div>
            <span data-i18n="open">Open</span>
            <span class="status-badge open" data-i18n="open">Open</span>
          </div>
          <div class="progress-bar">
            <div style="width: 60%; background-color: #F59E0B;"></div>
          </div>
          <div class="delta-info">
            <span class="delta-text"></span>
            <span data-i18n="from_last_week">from last week</span>
          </div>
        </div>
        <div class="support-ticket">
          <div>
            <span data-i18n="in_progress">In Progress</span>
            <span class="status-badge in_progress" data-i18n="in_progress">In Progress</span>
          </div>
          <div class="progress-bar">
            <div style="width: 30%; background-color: #3B82F6;"></div>
          </div>
          <div class="delta-info">
            <span class="delta-text"></span>
            <span data-i18n="from_last_week">from last week</span>
          </div>
        </div>
        <div class="support-ticket">
          <div>
            <span data-i18n="resolved">Resolved</span>
            <span class="status-badge resolved" data-i18n="resolved">Resolved</span>
          </div>
          <div class="progress-bar">
            <div style="width: 90%; background-color: #10B981;"></div>
          </div>
          <div class="delta-info">
            <span class="delta-text"></span>
            <span data-i18n="from_last_week">from last week</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Maintenance Overview -->
    <div class="card5">
      <div class="label" data-i18n="maintenance_overview">Maintenance Overview (Internal vs External)</div>
      <div class="chart-wrapper">
        <canvas id="maintenanceOverviewChart"></canvas>
      </div>
    </div>

    <!-- Upcoming Maintenance -->
    <div class="card6">
      <div class="label" data-i18n="upcoming_maintenance">Upcoming Maintenance - Regular Maintenance</div>
      <table class="upcoming-table">
        <thead>
          <tr>
            <th data-i18n="task">Task</th>
            <th data-i18n="date">Date</th>
            <th data-i18n="priority">Priority</th>
          </tr>
        </thead>
        <tbody id="upcomingMaintenanceBody">
          <!-- سيتم تعبئة المهام برمجياً من خلال الجافاسكربت -->
        </tbody>
      </table>
    </div>
  </section>

  <script>
    // Set current date
    document.getElementById('current-date').textContent = new Date().toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit'
    });
  </script>
  
  <script src="Dashboard.js"></script>
  <script src="/Language/Language.js"></script>
</body>

</html>