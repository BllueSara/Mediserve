<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Internal Ticket</title>
  <link rel="stylesheet" href="Internal Ticket.css" />
  <link rel="stylesheet" href="/Language/Language.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: var(--font-family);
    }

    h1,
    h2,
    h3,
    p,
    span,
    button,
    select,
    input,
    label {
      font-family: var(--font-family);
    }

    /* إخفاء المحتوى حتى يتم تحميل اللغة */
    .content-hidden {
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s ease-in-out;
    }

    .content-visible {
      opacity: 1;
      visibility: visible;
    }
  </style>
</head>

<body>
  <div class="container content-hidden" id="container">
    <!-- Navigation -->
  <header class="content-hidden">
    <div class="ms-logo"><img src="/icon/Ms Logo.png" alt="MS Logo" /></div>
    <div class="back-button">
      <a href="#" onclick="goBack()">
        <img src="/icon/Back.png" alt="Back Icon" class="back-icon"> <span data-i18n="back">Back</span>
      </a>
    </div>
    <div class="Home-button">
      <a href="/Home/Home.html"><img src="/icon/Home.png" alt="Home Icon" class="home-icon" /> <span data-i18n="home">Home</span></a>
    </div>
    <div class="hospital-logo"><img src="/icon/hospital-logo.png" alt="Hospital Logo" /></div>
  </header>

    <!-- Form -->
    <div class="ticket-container content-hidden">
      <h1 class="title" data-i18n="internal_ticket">Internal Ticket</h1>
      <p class="subtitle" data-i18n="fill_ticket_details">Fill in the details below to create a new Internal ticket</p>

<form id="ticket-form" enctype="multipart/form-data" method="POST">

        <!-- النوع -->
        <div class="form-group">
          <label for="ticket-type">
            <span data-i18n="ticket_type">Ticket Type</span>
            <span class="required-star">*</span>
          </label>
          <div class="custom-dropdown-wrapper" id="ticket-type-wrapper">
            <div class="custom-dropdown">
              <div class="dropdown-toggle" onclick="toggleDropdown(this)">
                <span id="selected-ticket-type" data-i18n="select_ticket_type">Select Ticket Type</span>
                <span>▼</span>
              </div>
              <div class="dropdown-content">
                <input type="text" class="dropdown-search" data-i18n-placeholder="search_ticket_types"
                  placeholder="Search ticket types..." oninput="filterDropdown(this, 'ticket-type-options')">
                <div class="dropdown-options" id="ticket-type-options"></div>
              </div>
            </div>
          </div>
          <input type="hidden" id="ticket-type" name="ticket_type" required />
        </div>

        <!-- Custom نوع -->
        <div class="form-group" id="custom-type-container" style="display: none;">
          <label for="custom-ticket-type" data-i18n="specify_custom_type">Specify Custom Type</label>
          <input type="text" id="custom-ticket-type" data-i18n-placeholder="enter_custom_type"
            placeholder="Enter custom type" />
        </div>

        <!-- رقم التذكرة -->
        <div class="form-group">
          <label for="ticket-number" data-i18n="ticket_number">Ticket Number</label>
          <input type="text" id="ticket-number" name="ticket_number" readonly data-i18n-placeholder="auto_generated"
            placeholder="Auto-generated..." />
        </div>

        <!-- الفني -->
        <div class="form-group">
          <label for="technical-status">
            <span data-i18n="technical_name">Technical Name</span>
            <span class="required-star">*</span>
          </label>
          <div class="custom-dropdown-wrapper" id="technical-status-wrapper">
            <div class="custom-dropdown">
              <div class="dropdown-toggle" onclick="toggleDropdown(this)">
                <span id="selected-technical-status" data-i18n="select_technical_engineer">Select Technical
                  Engineer</span>
                <span>▼</span>
              </div>
              <div class="dropdown-content">
                <input type="text" class="dropdown-search" data-i18n-placeholder="search_technical"
                  placeholder="Search technical..." oninput="filterDropdown(this, 'technical-status-options')">
                <div class="dropdown-options" id="technical-status-options"></div>
              </div>
            </div>
          </div>
          <input type="hidden" id="technical-status" name="technical_engineer_id" required />
        </div>

        <!-- الحالة -->
        <div class="form-group">
          <label for="report-status">
            <span data-i18n="report_status">Report Status</span>
            <span class="required-star">*</span>
          </label>
          <div class="custom-dropdown-wrapper" id="report-status-wrapper">
            <div class="custom-dropdown">
              <div class="dropdown-toggle" onclick="toggleDropdown(this)">
                <span id="selected-report-status" data-i18n="select_report_status">Select Report Status</span>
                <span>▼</span>
              </div>
              <div class="dropdown-content">
                <input type="text" class="dropdown-search" data-i18n-placeholder="search_report_statuses"
                  placeholder="Search report statuses..." oninput="filterDropdown(this, 'report-status-options')">
                <div class="dropdown-options" id="report-status-options"></div>
              </div>
            </div>
          </div>
          <input type="hidden" id="report-status" name="report_status" required />
        </div>

        <label for="device-type">
          <span data-i18n="device_type">Device Type</span>
          <span class="required-star">*</span>
        </label>
        <div class="custom-dropdown-wrapper" id="device-type-dropdown-wrapper">
          <div class="custom-dropdown">
            <div class="dropdown-toggle" onclick="toggleDropdown(this)">
              <span id="selected-device-type" data-i18n="select_device_type">Select device type</span>
              <span>▼</span>
            </div>
            <div class="dropdown-content">
              <input type="text" data-i18n-placeholder="search_device_type" placeholder="Search device type..."
                class="dropdown-search" oninput="filterDropdown(this, 'device-type-options')" />
              <div class="dropdown-options" id="device-type-options">
                <!-- سيتم تعبئة الخيارات عبر JavaScript -->
              </div>
            </div>
          </div>
        </div><input type="hidden" id="device-type" name="device-type" required />


        <!-- القسم -->
        <div class="form-group">
          <label for="section">
            <span data-i18n="section">Section</span>
            <span class="required-star">*</span>
          </label>
          <div class="custom-dropdown-wrapper" id="section-dropdown-wrapper">
            <div class="custom-dropdown">
              <div class="dropdown-toggle" onclick="toggleDropdown(this)">
                <span id="selected-section" data-i18n="select_section">Select section</span>
                <span>▼</span>
              </div>
              <div class="dropdown-content">
                <input type="text" data-i18n-placeholder="search_section" placeholder="Search section..."
                  class="dropdown-search" oninput="filterDropdown(this, 'section-options')" />
                <div class="dropdown-options" id="section-options">
                  <!-- يتم تعبئتها عبر JavaScript -->
                </div>
              </div>
            </div>
          </div>
          <input type="hidden" id="section" name="section" required />
        </div>

        <!-- المواصفات -->
        <label for="device-spec">
          <span data-i18n="device_specifications">Device Specifications</span>
          <span class="required-star">*</span>
        </label>
        <div class="custom-dropdown-wrapper">
          <div class="custom-dropdown">
            <div class="dropdown-toggle" onclick="toggleDropdown(this)">
              <span id="selected-device-spec" data-i18n="select_specification">Select specification</span>
              <span>▼</span>
            </div>
            <div class="dropdown-content">
              <input type="text" class="dropdown-search" data-i18n-placeholder="search_specification"
                placeholder="Search specification..." oninput="filterDropdown(this, 'device-spec-options')">
              <div class="dropdown-options" id="device-spec-options"></div>
            </div>
          </div>
        </div>
        <input type="hidden" id="device-spec" name="device-spec" required />

        <!-- باقي الحقول -->
        <div class="form-group">
          <!-- Problem Status -->
          <label for="problem-status">
            <span data-i18n="initial_diagnosis">Initial Diagnosis</span>
            <span class="required-star">*</span>
          </label>
          <div class="custom-dropdown-wrapper" id="problem-status-wrapper">
            <div class="custom-dropdown">
              <div class="dropdown-toggle" onclick="toggleDropdown(this)">
                <span id="selected-problem-status" data-i18n="select_initial_diagnosis">Select Initial Diagnosis</span>
                <span>▼</span>
              </div>
              <div class="dropdown-content">
                <input type="text" class="dropdown-search" data-i18n-placeholder="search_problem_status"
                  placeholder="Search problem status..." oninput="filterDropdown(this, 'problem-status-options')">
                <div class="dropdown-options" id="problem-status-options"></div>
              </div>
            </div>
          </div>
          <input type="hidden" id="problem-status" name="problem_status" required />

        </div>

        <!-- رفع ملف -->
        <div class="form-group">
          <label data-i18n="upload_email_copy">Upload a Copy of the Email</label>
          <div id="drop-area" class="upload-box">
            <img src="/icon/upload.png" class="upload-icon" />
            <p data-i18n="drop_files_here">Drop files here or click to upload</p>
            <span class="file-format-info" data-i18n="supported_formats">Supported formats: PDF, DOC, DOCX, EML</span>
            <input type="file" id="upload-file" hidden />
          </div>
        </div>

        <!-- أولوية -->
        <div class="form-group">
          <label>
            <span data-i18n="priority">Priority</span>
            <span class="required-star">*</span>
          </label>
          <div class="priority-options">
            <label><input type="radio" name="priority" value="high" required /> <img src="/icon/high.png"
                class="priority-icon" /> <span data-i18n="high">High</span></label>
            <label><input type="radio" name="priority" value="medium" /> <img src="/icon/Medium.png"
                class="priority-icon" /> <span data-i18n="medium">Medium</span></label>
            <label><input type="radio" name="priority" value="low" /> <img src="/icon/low.png" class="priority-icon" />
              <span data-i18n="low">Low</span></label>
          </div>
        </div>

        <!-- التفاصيل -->
        <div class="form-group">
<!-- Report Details -->
<label data-i18n="report_details">Report Details</label>
<textarea id="issue_description" name="issue_description" data-i18n-placeholder="enter_description"
  placeholder="Enter detailed description of the issue" required></textarea>

<!-- Final Diagnosis -->
<label data-i18n="final_diagnosis">Final Diagnosis</label>
<textarea id="final_diagnosis" name="final_diagnosis" data-i18n-placeholder="enter_final_diagnosis"
  placeholder="Enter final diagnosis after investigation"></textarea>

<!-- Other Description -->
<label data-i18n="other_description">Other Description</label>
<textarea id="other_description" name="other_description" data-i18n-placeholder="provide_additional_details"
  placeholder="Please provide additional details if 'Other' is selected"></textarea>

        </div>

        <!-- زر الحفظ -->
        <button type="submit" class="submit-btn" data-i18n="save_ticket">Save Ticket</button>
      </form>
    </div>
  </div>

  <!-- ✅ Popup for Custom Device Specification -->
   <div id="popup-modal" class="popup-overlay" style="display: none;">
    <div class="popup-content wide-popup">
      <h3 id="popup-title" data-i18n="enter_device_specifications">Enter Device Specifications</h3>
      <form id="pc-spec-form">
        <div id="popup-fields"></div>
        <div class="popup-buttons">
          <button type="button" class="save-btn" onclick="savePCSpec()"  data-i18n="save">Save</button>
          <button type="button" class="cancel-btn" onclick="closePopup()" data-i18n="cancel">Cancel</button>
        </div>
      </form>
    </div>
  </div>
  <!-- ✅ Popup for Adding Generic Options -->
  <div id="generic-popup" class="popup-overlay" style="display: none;">
    <div class="popup-contentt">
      <h3 id="generic-popup-title" data-i18n="add_new">Add New</h3>
      <label for="generic-popup-input" id="generic-label" data-i18n="new_value">New Value</label>
      <input type="text" id="generic-popup-input" data-i18n-placeholder="enter_new_value"
        placeholder="Enter new value..." required />
      <input type="hidden" id="generic-popup-target-id" />
      <div class="popup-buttons">
        <button type="button" class="save-btn" onclick="saveGenericOption()"  data-i18n="save">Save</button>
        <button type="button" class="cancel-btn" onclick="closeGenericPopup()" data-i18n="cancel">Cancel</button>
      </div>
    </div>
  </div>
  <script>
        
function goBack() {
  if (window.history.length > 1) {
    window.history.back(); // Navigates to the previous page in browser history
  } else {
    window.location.href = "Internal Ticket.html"; // Redirects to Maintenance home if there's no previous page
  }
}

    </script>
  <!-- JavaScript -->
  <script src="/Language/Language.js"></script>
  <script type="module" src="Internal Ticket.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // إظهار المحتوى بعد تحميل اللغة
      setTimeout(() => {
        const elements = document.querySelectorAll('.content-hidden');
        elements.forEach(element => {
          element.classList.remove('content-hidden');
          element.classList.add('content-visible');
        });
      }, 100);
    });
  </script>

  <!-- ===== الفوتر ===== -->
  <footer class="main-footer">
      <div class="footer-content">
          <div class="copyright" data-translate="all-rights-reserved">
              جميع الحقوق محفوظة 2025 ©
          </div>
          <div class="developers" data-translate="developed-by">
              إعداد المهندس هاني مياجان | تنفيذ المهندسة سارا اللهيبي
          </div>
      </div>
  </footer>

</body>

</html>